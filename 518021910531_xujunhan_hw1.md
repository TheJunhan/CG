## 计算机图形学之——旋转茶壶
*徐珺涵 518021910531*

---
#### 一、色彩设计
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本次小作业中我为茶壶和背景的渐变色选择了两种模式，可通过键盘事件切换喜欢的模式(详见交互设计)。
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第一种模式也即默认模式，主要使用了绿红搭配，茶壶的颜色从绿玉渐变为紫红色再逐渐变回绿玉色，背景随着茶壶的变色从橙红变化为麒麟黄。前期背景橙红与茶壶绿玉的对比到后面茶壶紫红与背景麒麟黄的对比都十分鲜明。
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第二种模式主要使用了黄蓝搭配法，茶壶从纯黄渐变到番木瓜黄色，背景从天空蓝变化到深蓝如此往复，相比于第一种模式渐变较慢且不明显，但是慢节奏的变化给人一种安宁之感，也别有一番风味。
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本次作业的颜色调配是从下面颜色转换网站的对照表中选取的。
> https://www.sioe.cn/yingyong/yanse-rgb-16/
#### 二、交互设计
- 鼠标交互
  本次作业中茶壶可通过鼠标点击并拖动的方式改变茶壶的位置，并通过键盘交互可将其设为初始状态。
- 键盘交互
  - 按r键重置茶壶位置：如果鼠标拖动茶壶不能得到满意的效果且拖不回去，可以按r键将茶壶恢复原位置(并且不会影响茶壶模式、旋转角度)
  - 按c键改变茶壶模式：按c键可从上述两种渐变模式中反复切换，不会改变茶壶角度与位置。
#### 三、编译环境
- 系统：Windows
- 编译器：Visual Studio 2019
- 使用的OpenGL库：glut.h
#### 四、具体实现
- 背景颜色与茶壶绘制：
  - 背景颜色使用`glClearColor`函数绘制并改变
  - 茶壶的绘制调用了glut库函数`glutWireTeapot`，通过`glRotatef`控制旋转角度，`gluLookAt`调整视角与位置，`glColor3ub`控制画笔的颜色从而控制了绘制出的茶壶的颜色。
- 旋转与渐变色：
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分析知旋转与变色都与一个因素有关，那就是角度，因此我们使用一个一个全局变量`rote`来代表角度，每次调用`display`渲染时根据`rote`的不同即可渲染出不同的效果，同时每次`display`也可以改变`rote`的值来使下次渲染效果不同。
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了不使太频繁的渲染使机器承载不必要的压力，我们调用`sleep`函数，让一次渲染过后停顿一下(不超过人眼的刷新频率)，再进行下一次刷新。
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对于rote的值，为了防止其一直变大，每当其到达360，我们就将其设置为0，从角度的角度来讲是一样的。
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;渐变色与角度的对应：以模式一中茶壶绿玉色(127，255，170)变为紫红色(255，0，255)为例，我们将角度与rgb值对应起来，在角度从0到180度时从绿玉色变为紫红色，角度从180度到360度时，再从紫红色变回绿玉色，循环往复。
> 例子：0~180时rgb=(255, 255 - rote * 16 / 180, rote * 213 / 180)
> 180~360时rgb=(255, 239 + (rote - 180) * 16 / 180, 213 - (rote - 180) * 213 / 180)
- 交互事件实现：
  - 调用`glutKeyboardFunc`与`glutMouseFunc`函数绑定自己的实现函数。
  - 设置全局变量：`flag` `headx` `heady`等
  - 模式切换事件：将布尔变量`flag`反置，`display`函数渲染时会检测`flag`并切换画笔&背景颜色
  - 拖动事件：鼠标点击记下一个`x`、`y`，当鼠标抬起时更新`headx`和`heady`，根据这两个变量改变物体视角。按下r时将headx和heady置为0。
  